[mysqld]
port=3308
server-id=2
relay-log=relay-bin
binlog_format=row
read_only=OFF
super_read_only=OFF
innodb_buffer_pool_size=2147483648

# 开启 GTID 复制
gtid_mode=ON
enforce_gtid_consistency=ON
#  让从库写 relay log 时也记录 GTID
log_replica_updates=ON
# 崩溃后自动从主库重新获取 relay log，保证一致性
relay_log_recovery=ON
# 设置 redo log 总容量为 2GB (控制 所有 redo log 文件的总大小)
innodb_redo_log_capacity = 2147483648

# 开启多线程复制
#replica_parallel_type=LOGICAL_CLOCK
#replica_parallel_workers=4

# 可选优化
# replica_preserve_commit_order=ON

# 禁用回复策略
innodb_force_recovery=0